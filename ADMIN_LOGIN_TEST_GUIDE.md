# ุฎุทูุงุช ุงุฎุชุจุงุฑ ุญู ูุดููุฉ 401

## ุงูุชุงุฑูุฎ: 19 ุฃูุชูุจุฑ 2025

## ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### 1. ุชุจุณูุท ููุทู ุชุณุฌูู ุงูุฏุฎูู
- โ ุฅุฒุงูุฉ ูุญุงููุฉ ูุฑุงุกุฉ ุจูุงูุงุช ุงููุณุชุฎุฏู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
- โ ุฅุฒุงูุฉ ุฌููุน setTimeout ูุงูุงูุชุธุงุฑ ุบูุฑ ุงูุถุฑูุฑู
- โ ุงูุชูุฌูู ูุจุงุดุฑุฉ ุจุนุฏ ุฅูุดุงุก ุงูุฌูุณุฉ

### 2. ูุณุญ ุงูุฌูุณุงุช ุงููุฏููุฉ
- โ ูุณุญ ุฃู ุฌูุณุฉ ููุฌูุฏุฉ ูุจู ุชุณุฌูู ุงูุฏุฎูู
- โ ุชุฌูุจ ุชุถุงุฑุจ ุงูุฌูุณุงุช

### 3. ุงุณุชุฎุฏุงู window.location.href
- โ ุฅุนุงุฏุฉ ุชุญููู ูุงููุฉ ููุตูุญุฉ
- โ ุชุญููู ุงูุฌูุณุฉ ุจุดูู ุตุญูุญ ูู Storage

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุชุณุฌูู ุฏุฎูู ุจูุงูุงุช ุตุญูุญุฉ โ

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ ุงููุชุตูุญ ูุงูุชูู ุฅูู: http://localhost:3000/admin/login
2. ุงูุชุญ Console ูู Developer Tools (F12)
3. ุฃุฏุฎู:
   - Email: ุจุฑูุฏู ุงูุฅููุชุฑููู ููุฃุฏูู
   - Password: ูููุฉ ุงููุฑูุฑ
4. ุงุถุบุท "Sign In"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
Console Logs:
โ Starting login process for: your-email@example.com
โ No existing session to clear (ุฃู) Cleared any existing session
โ Creating email session...
โ Session created successfully: [session-id]
โ Login successful, redirecting to dashboard...
```

**ุงููุชูุฌุฉ ูู ุงููุชุตูุญ:**
- โ ูุชู ุงูุชูุฌูู ุฅูู http://localhost:3000/admin
- โ Dashboard ูุธูุฑ ุจุดูู ุตุญูุญ
- โ ูุง ุฃุฎุทุงุก ูู Console
- โ ูุง ุฑุณุงุฆู ุฎุทุฃ ุนูู ุงูุดุงุดุฉ

### ุงุฎุชุจุงุฑ 2: ุชุณุฌูู ุฏุฎูู ุจุจูุงูุงุช ุฎุงุทุฆุฉ โ

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ: http://localhost:3000/admin/login
2. ุฃุฏุฎู:
   - Email: wrong@example.com
   - Password: wrongpassword
3. ุงุถุบุท "Sign In"

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
Console Logs:
โ Login error: AppwriteException
โ Error code: 401
โ Error type: user_invalid_credentials
```

**ุงููุชูุฌุฉ ูู ุงููุชุตูุญ:**
- โ ุฑุณุงูุฉ ุฎุทุฃ ุชุธูุฑ: "Invalid email or password. Please check your credentials."
- โ ุงููุณุชุฎุฏู ูุจูู ูู ุตูุญุฉ Login
- โ ูุง ูุชู ุงูุชูุฌูู

### ุงุฎุชุจุงุฑ 3: ูุณุชุฎุฏู ููุณ Admin โ๏ธ

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจูุณุชุฎุฏู ููุณ ูุฏูู role: "admin"
2. ุฑุงูุจ ูุง ูุญุฏุซ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุชุณุฌูู ุงูุฏุฎูู ููุฌุญ
- โ ูุชู ุงูุชูุฌูู ุฅูู /admin
- โ Admin Layout ููุชุดู ุฃู ุงููุณุชุฎุฏู ููุณ admin
- โ ูุธูุฑ alert: "Access denied. Admin privileges required."
- โ ูุชู ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### ุงุฎุชุจุงุฑ 4: ุชุณุฌูู ุฏุฎูู ูุชุนุฏุฏ ๐

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจูุณุชุฎุฏู ุฃูู
2. ุจุฏูู ุชุณุฌูู ุฎุฑูุฌุ ุญุงูู ุชุณุฌูู ุฏุฎูู ุจูุณุชุฎุฏู ุขุฎุฑ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
Console Logs:
โ Cleared any existing session
โ Creating email session...
โ Session created successfully
```

- โ ุงูุฌูุณุฉ ุงููุฏููุฉ ุชููุณุญ
- โ ุฌูุณุฉ ุฌุฏูุฏุฉ ุชููุดุฃ
- โ ุชุณุฌูู ุฏุฎูู ูุงุฌุญ

### ุงุฎุชุจุงุฑ 5: ุฅุนุงุฏุฉ ุชุญููู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ๐

**ุงูุฎุทูุงุช:**
1. ุณุฌู ุฏุฎูู ุจูุฌุงุญ
2. ูู ุตูุญุฉ Dashboardุ ุงุถุบุท F5 (Refresh)

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ Dashboard ูุนูุฏ ุงูุชุญููู ุจุดูู ุตุญูุญ
- โ ุงููุณุชุฎุฏู ูุง ุฒุงู ูุณุฌู ุฏุฎูู
- โ ูุง ูุชู ุงูุชูุฌูู ุฅูู ุตูุญุฉ Login

## ุชุดุฎูุต ุงููุดุงูู

### ุฅุฐุง ุธูุฑ ุฎุทุฃ 401 ูุน ุจูุงูุงุช ุตุญูุญุฉ:

**ุชุญูู ูู Appwrite Console:**

1. ุงูุชุญ: https://cloud.appwrite.io
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู: Auth > Users
4. ุงุจุญุซ ุนู ุงููุณุชุฎุฏู
5. ุชุญูู ูู:
   - โ Email ุตุญูุญ
   - โ Password ุชู ุชุนูููู
   - โ Status: Active

### ุฅุฐุง ุชู ุงูุชูุฌูู ูููู "Access Denied":

**ุชุญูู ูู Preferences:**

1. ูู Appwrite Console > Auth > Users
2. ุงุฎุชุฑ ุงููุณุชุฎุฏู
3. ุงุฐูุจ ุฅูู: Preferences
4. ูุฌุจ ุฃู ูุญุชูู ุนูู:
```json
{
  "role": "admin"
}
```

### ุฅุฐุง ูู ูุชู ุงูุชูุฌูู:

**ุชุญูู ูู Console:**

1. ุงูุชุญ Developer Tools (F12)
2. ุงุฐูุจ ุฅูู: Console tab
3. ุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
4. ุงุจุญุซ ุนู ุฃุฎุทุงุก Network ูู Network tab

## Environment Variables

ุชุฃูุฏ ูู ุฃู ุงูู `.env.local` ูุญุชูู ุนูู:

```bash
NEXT_PUBLIC_APPWRITE_ENDPOINT=https://cloud.appwrite.io/v1
NEXT_PUBLIC_APPWRITE_PROJECT_ID=your_actual_project_id
NEXT_PUBLIC_APPWRITE_DATABASE_ID=your_database_id

# Server-side (optional for this fix)
APPWRITE_API_KEY=your_api_key
```

## ุฅูุดุงุก ูุณุชุฎุฏู Admin ุฌุฏูุฏ

### ุงูุทุฑููุฉ 1: ูู Appwrite Console (ุงูุฃุณูู)

1. ุงุฐูุจ ุฅูู: Auth > Users
2. ุงุถุบุท: "Add User"
3. ุฃุฏุฎู:
   - Name: Admin User
   - Email: admin@example.com
   - Password: [ูููุฉ ูุฑูุฑ ูููุฉ]
4. ุจุนุฏ ุงูุฅูุดุงุกุ ุงุฎุชุฑ ุงููุณุชุฎุฏู
5. ูู "Preferences", ุฃุถู:
```json
{
  "role": "admin"
}
```
6. ุงุญูุธ

### ุงูุทุฑููุฉ 2: ูู ุงูููุฏ

```javascript
// ูู API route ุฃู Server Action
const { Users } = require('node-appwrite');
const { createServerClient } = require('@/lib/appwrite');

const client = createServerClient();
const users = new Users(client);

// ุฅูุดุงุก ุงููุณุชุฎุฏู
const user = await users.create(
  ID.unique(),
  'admin@example.com',
  null,
  'SecurePassword123!',
  'Admin User'
);

// ุชุนููู ุฏูุฑ Admin
await users.updatePrefs(user.$id, {
  role: 'admin'
});
```

## ููุงุญุธุงุช ูููุฉ

### 1. ุงูุฃูุงู ๐
- ูุง ุชุดุงุฑู ุงูู API Key ูุทููุงู
- ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ
- ูุนูู Two-Factor Authentication ูู Appwrite

### 2. ุงูุฃุฏุงุก โก
- ุงูุญู ุงูุญุงูู ุณุฑูุน ููุนุงู
- ูุง ุงูุชุธุงุฑ ุบูุฑ ุถุฑูุฑู
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

### 3. ุงูุตูุงูุฉ ๐ง
- ุงูููุฏ ุจุณูุท ููุงุถุญ
- ุณูู ุงูููู ูุงูุชุนุฏูู
- ููุซู ุฌูุฏุงู

## ุงูุฎูุงุตุฉ

โ **ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ!**

ุงูุญู ุงูููุงุฆู:
1. ูุณุญ ุงูุฌูุณุฉ ุงููุฏููุฉ
2. ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ
3. ุชูุฌูู ููุฑู ุจุฏูู ูุญุงููุฉ ูุฑุงุกุฉ ุงูุจูุงูุงุช
4. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู Admin Layout

**ุงููุชูุฌุฉ:**
- โ ูุง ุฃุฎุทุงุก 401
- โ ุชุณุฌูู ุฏุฎูู ุณูุณ
- โ ุฃุฏุงุก ููุชุงุฒ
- โ ููุฏ ูุธูู

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู Console logs
2. ุฑุงุฌุน Appwrite Console
3. ุชุฃูุฏ ูู Environment Variables
4. ุฑุงุฌุน ุงูู User Preferences

**ูู ุดูุก ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**
